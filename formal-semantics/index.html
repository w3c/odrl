<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>ODRL Formal Semantics</title>
            <script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove" defer></script>
            <script class="remove" src="config.js"></script>
            <link rel="stylesheet" href="https://www.w3.org/TR/vocab-duv/localstyle.css"/>
            <link rel="stylesheet" type="text/css" href="https://www.w3.org/StyleSheets/TR/2016/W3C-WG-NOTE"/>
            <script src="http://www.w3.org/2013/ShEx/demobits/jquery.min.js" type= "text/javascript"></script>
            <style>
                kbd {
                 color: lemonchiffon;
                 font-family: monospace;
                 background-color: dimgray ;
                 border: 1px solid #ccc;
                 border-radius: 3px;
                 padding: 2px 4px;
                 display: inline-block;
               }
            </style>
    </head>
    <body>
        <section  id="abstract">
            <p>
                This document specifies the expected behaviour of an ODRL Evaluator, a piece of software that performs computations based on a set of policies, a request and a certain state of the world. 
            </p>
        </section>
        <section id='sotd'>
        </section> 
        <section id="intro">
            <h2>Introduction</h2> 	
            <p> <!-- definition of ODRL -->
                    The Open Digital Rights Language (ODRL) is a policy expression language that can be used to represent permitted, prohibited, and obligated actions over a certain asset. 
            </p>
            <p> <!-- reference of official ODRL-documents -->
                    The <a href="https://www.w3.org/TR/odrl-model/#infoModel">ODRL Information Model</a> formally defines the core abstract concepts of the model and their properties by means of an OWL 2 Ontology (available at <a href="https://www.w3.org/ns/odrl/2/">https://www.w3.org/ns/odrl/2/</a>), which is described in the ODRL <a href="https://www.w3.org/TR/odrl-vocab/">Vocabulary & Expression</a> specification. This document does not contradict these documents, and its interpretation is subordinate to theirs.	
            </p>
            <p> <!-- the use of ontologies -->
                    The ODRL ontology can be used as a data model to represent machine-readable Policies and associate them with digital or analog assets. By using a machine-readable language to represent policies, ODRL implementations can provide useful functionalities such as those of a policy search engine, a policy compatibility checker, an access control system, a monitoring system, or a policy planning system, among others.
            </p
            <p> <!-- the need for clarifying the semantics, the need for this document -->
		    
However, neither the specification of the model (in a text form) nor the vocabulary (in an OWL ontology) accurately describes the behaviour of an <b>ODRL Evaluator</b>. 

<!-- objective of the evaluator -->
The objective of an <b>ODRL Evaluator</b> is to determine: 
<ul>
  <li>which Permissions, Prohibitions, and/or Obligations (collectively named Rules) are <b>active</b> in a given instant of time. 
  A Rule is said to be active if it is in effect;</li>
  <!--<li>which Permissions have been <b>used</b>;</li>-->
  <li>which Prohibitions and Obligations have been <b>violated</b> or <b>fulfilled</b>.</li>
</ul>

This document describes the expected behaviour of an ODRL Evaluator, with a textual description and a collection of examples.
	
<p> <!-- definition of the evaluator -->
When the <b>ODRL Evaluator</b> evaluates Permissions, it is expected to work in at least one of these two scenarios:
        </p>
        <ol>
            <li><b>Access control scenario</b>: the ODRL Evaluator determines the access by users or software agents to digital resources
            considering a set of policies, the state of the world, and the description of the action that a user 
            <b>requests</b> to perform on certain digital resources. It may be useful to distinguish between 
	    requested and <b>attempted</b> action. When an agent attempts to perform an action, 
            e.g. an agent double-clicks on a picture, if the action is not permitted the attempt is recorded 
	    and if it is the case sanctioned. 
	In the case of a request, only the answer is generated: either the action is permitted or the action is denied.
	    </li>

            <li><b>Policy monitoring scenario</b> (also known as compliance checking or usage control): given a set of policies and the description of the 
	   state of the world that includes the actions actually <b>performed</b>, the ODRL Evaluator has to determine 
	whether obligations or prohibitions have been fulfilled or violated by the performance of 
            certain actions, and which permissions are active.</li>
        </ol>

<section id="conventions">
<h3>Document Conventions</h3>
    <p>Within this document, the following namespace prefix bindings are used:</p>
<table class="def">
    <tbody>
      <tr>
        <th>Prefix</th>
        <th>Namespace</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>odrl</td>
        <td>http://www.w3.org/ns/odrl/2/</td>
        <td>[[odrl-vocab]] [[odrl-model]]</td>
      </tr>
      <tr>
        <td>odrl-fs</td>
        <td>to be defined</td>
        <td>Resources defined by this spec</td>
      </tr>
      <tr>
        <td>rdf</td>
        <td>http://www.w3.org/1999/02/22-rdf-syntax-ns#</td>
        <td>[[rdf11-concepts]]</td>
      </tr>
      <tr>
        <td>rdfs</td>
        <td>http://www.w3.org/2000/01/rdf-schema#</td>
        <td>[[rdf-schema]]</td>
      </tr>
         <tr>
        <td>owl</td>
        <td>http://www.w3.org/2002/07/owl#</td>
        <td>[[owl2-overview]]</td>
      </tr>
    <tr>
        <td>xsd</td>
        <td>http://www.w3.org/2001/XMLSchema#</td>
        <td>[[xmlschema11-2]]</td>
      </tr>
          <tr>
        <td>skos</td>
        <td>http://www.w3.org/2004/02/skos/core#</td>
        <td>[[skos-reference]]</td>
      </tr>
      <tr>
        <td>dcterms</td>
        <td>http://purl.org/dc/terms/</td>
        <td>[[dcterms]]</td>
      </tr>
        <tr>
        <td>vcard</td>
        <td>http://www.w3.org/2006/vcard/ns#</td>
        <td>[[vcard-rdf]]</td>
      </tr>
      <tr>
        <td>foaf</td>
        <td>http://xmlns.com/foaf/0.1/</td>
        <td>[[foaf]]</td>
      </tr>

      <tr>
        <td>schema</td>
        <td>http://schema.org/</td>
        <td><a href="http://schema.org/">schema.org</a></td>
      </tr>

                     <tr>
        <td>cc</td>
        <td>https://creativecommons.org/ns#</td>
        <td><a href="https://creativecommons.org/ns#">creativecommons.org</a></td>
      </tr>

                     <tr>
        <td>ex</td>
        <td>http://example.com/ns#</td>
        <td></td>
      </tr>

    </tbody>
  </table>

</section>          

<section id="terminology">
<h3>Terminology</h3>
        <ul>
            <li><b>Condition</b>. An instance of the class <code>odrl:Duty</code> represents a <b>Condition</b> for a <code>odrl:Permission</code>
            when the <code>odrl:Permission</code> refers to it by means of the <code>odrl:duty</code> property.
            </li>

            <li><b>Consequence</b>. An instance of the class <code>odrl:Duty</code> represents a <b>Consequence</b> for a <code>odrl:Duty</code> 
                    when the <code>odrl:Duty</code> refers to it by means of the <code>odrl:consequence</code> property. </li>
            
            <li><b>Constraint</b>. An instance of the class <code>odrl:Constraint</code> is a <b>Constraint</b> of a <code>odrl:Rule</code> when the rule refers to it by means of the <code>odrl:constraint</code> property.</li>             
            
            <li><b>Obligation</b>. An instance of the class <code>odrl:Duty</code> is an <b>Obligation</b> of a <code>odrl:Policy</code> 
            when the <code>odrl:Policy</code> refers to it by means of the <code>odrl:obligation</code> property. 

            <li><b>Refinement</b>. An instance of the class <code>odrl:Constraint</code> is a <b>Refinement</b> when an <code>odrl:Action</code>, <code>odrl:AssetCollection</code> or <code>odrl:PartyCollection</code> refers to it by means of the <code>odrl:constraint</code> property. </li>

            <li><b>Remedy</b>. An instance of the class <code>odrl:Duty</code> represents a <b>Remedy</b> for a <code>odrl:Prohibition</code> 
                    when the <code>odrl:Prohibition</code> refers to it by means of the <code>odrl:remedy</code> property. </li>

        </ul>
</section>    


</section>
        <section id="sotw">
            <h2>ODRL Evaluator</h2> 	
<p> 
The ODRL Evaluator uses as <b>input</b>:
</p>
			
	<ol> <!-- input of the Evaluator -->
	  <li>a Policy;</li>
	  <li>a formal description of the State of the World;</li>
	  <li>a formal description of an Evaluation Request that contains at least a description of an action (e.g. the type of the action, 
	the actor who is located in a given place, the target, and an instant of time);</li>
	<!--  <li> an optional parameter specifying the behaviour when an action is neither permitted nor prohibited. Its value can be open or closed. 
	The default value is closed. -->
	  </li>
	</ol>
	The ODRL Evaluator produces as <b>output</b>: 
	<ol> <!-- input of the Evaluator -->
	  <li>an Evaluation Report;</li>
	</ol>
		This section describes the State of the World, the Evaluation Request and the Evaluation Report.

        <h3>State of the World</h3>
        <p><!-- state of the world --> 
            The ODRL Evaluator requires a formal representation of the <b>state of the world</b>.
            The state of the world specifies knowledge representing real-world information that aids the evaluation of ODRL Policies.
            For example, a certain state of the world may include the current date and time, the location of agents, or the history of performed actions.
        </p>
        <p>
            This document aims to provide a formal representation for the state of the world concepts that are necessary to evaluate ODRL policies,
            without forcing the usage of existing vocabularies, e.g., country codes can be modelled using the
            <a href="https://en.wikipedia.org/wiki/ISO_3166">ISO 3166</a> and <a href="https://unstats.un.org/unsd/methodology/m49">UN M49</a> standards.
            Furthermore, the formal representation of this information will be specified as RDF triples. 
            The existence of these triples does not entail their represented world is a reality: the <i>factuality</i> of the 
            class instances is not entailed, and hypothetical computations are possible. 
            The implementor of the ODRL Evaluator may want to describe the factuality of relevant class instances. 
            RDF triples to represent the state of the world may be generated as observations from the world generated by third parties or 
            by the ODRL Evaluator itself.
        </p>
            As such, in this document, we aim to provide a minimal set of information that needs to be represented in the 
            state of the world and respective definitions, which will be formally represented in an 
            <a href="sotw.ttl">RDF vocabulary</a>:
        </p>
        <ul>
            <li><code>SotW</code>: A set of knowledge representing real-world information aiding the evaluation of ODRL Policies</li>
            <li><code>currentTime</code>: Denotes the current time of the state of the world</li>
            <li><code>location</code>: Denotes the location where the policy is being evaluated</li>
            <li><code>assetCollection</code>: Denotes an asset that is part of an asset collection</li>
            <li><code>partyCollection</code>: Denotes a party that is part of a party collection</li>
            <li><code>report</code>: Denotes existing reports from previously performed ODRL evaluations, i.e., to get history of attempted and performed actions</li>
            <li><code>count</code>: Denotes the amount of times a rule has been exercised</li>
            <li><code>event</code>: Denotes information about an event that has occurred, e.g., when it has occurred</li>
            <li><code>accumulatedTime</code>: Denotes an accumulated amount of time a rule has been exercised</li>
            <li><code>recipient</code>: Denotes information about a recipient of a rule that has been exercised</li>
	     
	        <!-- <li> actions are described in RDF by specifying at least:
                <ul> 
                    <li>the <code>type</code> (a list of actions types is available in the <a href="https://www.w3.org/TR/odrl-vocab/#actionsCommon">ODRL Common Vocabulary</a>); </li>
                    <li>the agent who is the <code>performer</code> of the action;</li>		
                    <li>the <code>object</code> upon which the action is carried out;</li>	
		            <li>the instant of time at which the action occurs or begins, which is represented with the <code>atTime</code> property.</li>
                </ul>
            </li>
            <li>a list of languages from a taxonomy (e.g. iso639);</li>
            <li>temporal entities, like instants or intervals with a start and end time that can be represented by re-using the <a href="https://www.w3.org/TR/owl-time/">Time Ontology in OWL</a>;</li> -->
        </ul>

        <aside class="example" title="State of the world representation">
            <p>
                Since we do not want to force the objects of the state of the world triples to be modelled using a specific vocabulary,
                in this example we abstract it away by using URIs, e.g., <code>ex:currentTime</code> to associate a certain state of the world
                with the current time.
            </p>
            <pre>
                @prefix ex:   &lt;https://ex.org/> .
                @prefix sotw: &lt;https://ex.org/sotw#> .

                ex:sotw a sotw:SotW ;
                    sotw:currentTime ex:currentTime ;
                    sotw:location ex:location ;
                    sotw:assetCollection ex:asset ;
                    sotw:partyCollection ex:party ;
                    sotw:report ex:report ;
                    sotw:count ex:count ;
                    sotw:event ex:event ;
                    sotw:accumulatedTime ex:accumulatedTime ;
                    sotw:recipient ex:recipient .
            </pre>
        </aside>		
            <h3>Evaluation Request</h3>
            <p>
                An evaluator requires an <b>Evaluation Request</b> as input.
                <!-- The evaluator uses an Evaluation Request as input to assess whether a particular <code>odrl:Action</code> by an <code>odrl:Party</code> on an <code>odrl:Asset</code> can be fulfilled according to an ODRL policy. -->
                The <b>Evaluation Request</b>, which is represented in RDF, is formally defined by the class <code>odrl-fs:EvaluationRequest</code> and MUST contain the following properties:
            </p>
            <ul>
                <li><code>odrl:action</code>: The action to be evaluated (e.g., use, read, modify).</li>
                <li><code>odrl:assignee</code>: The party (e.g., person or organization) requesting/requested the action.</li>
                <li><code>odrl:target</code>: The asset (e.g., file, document, data) on which the action is to be/was performed.</li>
                <li><code>dcterms:issued</code>: The time of the request.</li>
            </ul>
            <p>
                Additional contextual information can also be included in the Evaluation Request, 
                e.g., a purpose for exercising the requested action.
            </p>
            <p>
                To ensure consistency, it is recommended that requests conform to the defined SHACL shapes.
            </p>
            <p>
                For formal validation and integration, the <code>odrl-fs:EvaluationRequest</code> class is defined in an OWL ontology, with corresponding
                SHACL shapes specifying structural constraints and a JSON-LD context to ensure semantic consistency across RDF representations.
                These resources can be found at the following locations:
                <ul>
                    <li><a href="https://w3c.github.io/odrl/formal-semantics/ontology/owl.ttl" target="_blank">OWL Ontology</a></li>
                    <li><a href="https://w3c.github.io/odrl/formal-semantics/ontology/shacl.ttl" target="_blank">SHACL Shapes</a></li>
                    <li><a href="https://w3c.github.io/odrl/formal-semantics/ontology/json-ld_context.json" target="_blank">JSON-LD Context</a></li>
                </ul>
            </p>

        <aside class="example" title="Evaluation Request Example">
            Alice requests the use of document 1234 to be evaluated.
            <pre>
                {
                  "@context": {
                    "http://www.w3.org/ns/odrl.jsonld",
                    "odrl-fs": "https://w3id.org/odrl-fs#"
                  },
                  "@type": "odrl-fs:EvaluationRequest",
                  "action": "odrl:use",
                  "assignee": {
                    "@id": "http://example.org/party/Alice"
                  },
                  "target": "http://example.com/document/1234"
                }
            </pre>
			</aside>
		<section id="sectionPolicies">	
            <h3>Evaluation Report</h3>
            Pending to be written.
		</section>

        </section>


    </section>			


    <section id="sectionPolicies">	
        <h2>Semantics of Policies</h2>	
        <p> <!-- Subclasses of policies -->
            There are three ODRL Policy subclasses (Agreement, Offer, Set), plus four non-normative ODRL Policy subclasses (Assertion, Privacy, Request, Ticket). Direct instances of the <code>odrl:Policy</code> class must be understood as policy <code>odrl:Set</code> policies. This subsection describes how are these policies to be understood in relation to semantics.
        </p>
        <ul>
            <li>A <code>odrl:Set</code> policy must be considered by an ODRL Evaluator. The <code>odrl:Set</code> is not necessarily linked to <code>odrl:Offer</code> nor <code>odrl:Agreement</code>.<br></li>
            <li>An <code>odrl:Offer</code> policy must not be considered by an ODRL Evaluator. It is created by an <code>odrl:Assigner</code> as a mere proposition.</li>
            <li>An <code>odrl:Agreement</code> policy must be considered by an ODRL Evaluator as any other <code>odrl:Set</code> policy. It represents the accord between (<i>at least</i>) one <code>odrl:Assigner</code> and a <code>odrl:Assignee</code>. An instance of <code>odrl:Agreement</code> may have a way for the <code>odrl:Assigner</code> to trace to its related <code>odrl:Offer</code>.</li>
        </ul>

	<p>Before providing the semantics of an ODRL Policy that may contain one or more Rules, 
	we have to provide the semantics of the different types of ODRL Rules: Permission, Prohibition, and Obligation.</p>


    <section id="sectionPermissionsProhibitionsObligations">	
        <h3>General semantics of Rules</h3>	
        <p> <!-- Relation with deontic logic -->
            The deontic modalities of permissions, prohibitions and obligations can be represented in ODRL as instances of the classes 
            <code>odrl:Permission</code>, <code>odrl:Prohibition</code> and <code>odrl:Duty</code>.
        </p>
        <p>Instances of the class <code>odrl:Duty</code> may have the following different meanings: Obligation, Condition, Consequence or Remedy. Instances of the class <code>odrl:Constraint</code> may have the meaning of: Constraint or Refinement.
        </p>
        <p>
            The concepts (objects) to be understood by an ODRL Evaluator therefore include: Policy, Permission, 
		Prohibition, Obligation, Condition (Duty), Consequence, Remedy, Refinement, 
		Constraint, State of the World, and actions. 
            Here follows a list of properties (with their possible values) needed by the ODRL Evaluator:</p>
        <ul> <!-- attributes of the main objects -->
            <li>Permission, Prohibition, Obligation, and Condition (Duty) have a property called 
            <b>activation state</b>, which can take the values of <b>active</b> or <b>inactive</b>.</li>

            <li>Prohibition, Obligation, and Condition (Duty) have a property called <b>deontic state</b>, 
            which can take the values of <b>not-set</b>, or <b>violated</b>, or <b>fulfilled</b>.
            They can become violated or fulfilled only when they are active. <br>
	    An active prohibition can be violated many times by different actions, 
	    therefore when a prohibition is violated it is required
	     to register the action that brings to the violation. <br>
	    </li>

	    <li>Permission has a property called <b>control state</b>, which can take the values of <b>permit</b> or 
	    <b>deny</b> of a specific action.</li>

            <li>Constraint (connected to the Rule using the odrl:constraint property) has a property called
            <b>satisfaction state</b> which can take the values of <b>satisfied</b> or <b>not-satisfied</b>. 
            A not-satisfied constraint may become satisfied and return to being not-satisfied.
            The value of the satisfaction state of a Constraint is calculated according to the <b>state of the world</b>.
            Constraints directly defined at policy level are not directly considered.</li>

            <li>Refinement (connected to an Action, to an AssetCollection, or to a PartyCollection using the 
            odrl:refinement property) has a property called <b>satisfaction state</b> 
            which can take the values of <b>satisfied</b> or <b>not-satisfied</b>.
           			
           <!-- <li>Action (connected to the Rule with the odrl:action property) has a property called <b>performance state</b> 
            which initially takes the values <b>not-performed</b> and 
            can become <b>performed</b> when an action with all the properties values (i.e. <code>type</code>, 
                    <code>performer</code>, <code>object</code>,...)  that matches with the values
            described in the Rule (i.e. <code>action</code>, <code>assignee</code>, <code>target</code>) 
                    is actually performed at a given instant of time and its performance is represented 
                    in the state of the world.</li> -->
	
            </ul>

<p> <!-- out of scope -->
<!-- Nicoletta: I agree that we REMOVE this part because the computation of the satisfaction of Constraints and 
	Refinement has to be realized by the ODRL Evaluator.
<!--		
            The process for computing:
	<ul>
		<li>the satisfaction state of Constraints with respect to the state of the world; </li>
		<li>the satisfaction state of Refinement with respect the action and the state of the world;</li>
                <li>the performance state of an Action with respect to the state of the world</li>
	 </ul>
	 may be realized by another component (independent from the ODRL Evaluator). 
	The crucial point is that given these values, all ODRL Evaluators should agree on the 
	    value of the activation state and deontic states of the rules.
-->
        </p>

        <p>
            The mechanisms for computing the activation of Permissions, Prohibitions, and Obligations and the violation or 
            fulfillment of Prohibitions and Obligations are all different. Therefore we continue by discussing the semantics of 
            Permissions, Prohibitions, and Obligations in separated sections.
        </p>
    </section>		
    </section>

    <section id="sectionPermissions">
        <h2>Semantics of Permissions</h2> 
<p>
	In ODRL 2.2 a Permission can be limited by duties, like making a payment, we call these <b>Conditions</b>.
	It can also be limited by <b>Constraints</b> (in time, in space, etc.). 
        In addition, the definition of the permitted action, the asset, and the party collection can be refined with <b>Refinements</b>. 
        The evaluation of these Conditions (duties) and Constraints determine whether the Permission is active 
	(i.e., it permits the performance of an action that belongs to the class of action regulated by the permission
	and that satisfies all the refinements) or not.  

        <!--The evaluation of permission activation is different in the access control scenario that in the monitoring scenario.-->
	Permissions can be evaluated in two different scenarios: access control or monitoring.
</p>
	 <p>
            In the <b>access control scenario</b>: when an action is <b>requested</b>,
            the activation of permissions is computed. 
	    If there is an active permission that permits such an action with all refinements satisdied, 
	    then action is permitted.
	    If there is not an active permission that permits such an action with all refinements satisdied, 
	    then action is denied.
        </p>

	     <p>
            In the <b>monitoring scenario</b>: when an action is <b>performed</b>, it is represented in the state of the world.
            When the performace of the action has to be evaluated with respect to the permissions.
	    If the performed action belongs to class of actions (with all refinements satisfied) regulated 
	    by an active permission, then the action is permitted. 
	    if there is no active permission to do such an action (with all refinements satisfied) and the default 
	    setting for the ODRL Evaluator is set to "everything is prohibited unless explicitly permitted" a 
	    violation should be generated. <br>
	<br>
	
	<!--In the monitoring scenario, the value of the satisfaction state of a Refinement is computed according to the actual actions that are performed by the agents and that are
            represented in the state of the world. The satisfaction of the Refinement is NOT used for computing the activation of the Permission.-->
		     
        </p>

	    
        <!--<h3>Expected behaviour of the ODRL Evaluator</h3>-->
        <p> 
	<!-- definition of active permission (a permission is an instance of the class <code>odrl:Permission</code>)-->
       	<!-- definition of active/inactive -->
		
        The ODRL Evaluator computes that a Permission is <b>active</b> iif:
        </p>
        <ol>
            <li>all the existing Constraints of the Rule are satisfied and;</li> 
            <li>all the existing Conditions (duties of the Rule) are fulfilled or inactive; </li>
           <!-- <li>only for the access control scenario: all the existing Refinements of the 
            Action, AssetCollection, PartyCollection are satisfied by the requested action.</li>-->
        </ol>

<p>
        <!--If the Permission is active, then the action is permitted. <br>-->
	If one of those conditions is not met, the Permission is <b>inactive</b>. 
</p>

       
<!--
	    <p>In the following examples of permissions, as we will analyse one permission at a time, we will not deal with the 
		generation of violations for permissions. 
	-->

	    <p>Please note that in the following examples namespaces are used, so that <code>http://example.com/constraint/</code> is simplified by 
	"<code>constraint:</code>",  <code>http://example.com/policy/</code> is simplified by "<code>policy:</code>",  etc.</p>
        Notation used in the example tables: blue colour for the input and red colour for the output of the ODRL Evaluator </p>

        <h3>Evaluation of Constraints</h3>
		    
        <big><b>A1 Example of a constrained permission</b></big>
        <p>
            <b>Example description</b>
        </p>
        <p>
            <!-- General description of the case --> 
            A permission may have its action limited (in time, in space, etc.) without any Condition (Duty) or Refinement.
            This is the situation of the following case (similar to <a href="https://www.w3.org/TR/odrl-model/#constraint-rule">Example 13</a> 
            in the ODRL Information Model 2.2). The permission below allows the target asset <code>document:1234</code> to be distributed, 
            it includes the constraint that the permission may only be exercised until 2018-01-01. 
            The permission is granted by the organization <code>party:16</code>.
        </p>

            <pre>
            {
"@context": "http://www.w3.org/ns/odrl.jsonld",
"@type": "Set",
"uid": "http://example.com/policy/A1",
"permission": [{
   "@id": "http://example.com/rule/A1",
   "target": "http://example.com/document/1234",
   "assigner": "http://example.com/party/16",
   "action": "distribute",
   "constraint": [{
       "@id": "http://example.com/constraint/A1",
       "leftOperand": "dateTime",
       "operator": "lt",
       "rightOperand":  { "@value": "2018-01-01", "@type": "xsd:date" }
   }]
}]
}
            </pre>
        <p>
            <b>Expected behaviour of the Evaluator</b>
        </p>    
        <p>
        The ODRL Evaluator has to calculate first the activation state of the permission. 
	The constraint must be evaluated on the state of the world, which must include a representation of the current time.
        As long as the current time is before the first day of 2018, the Permission is active. When the first day of 2018 
	is passed, the Permission is inactive. The action class regulated by the permission is <code>distribute</code>, the target is <code>document:1234</code>, and the assignee is not specified.
        </p>
     
        <p>
            The table below shows the input (blue) and the output (red) of the ODRL Evaluator in different cases. 
        </p>
	
        <table border="1" style="font-size:small;">
            <tr>
                    <th>Example</th>
                    <th style="color:darkblue">Policy</th>
                    <th style="color:darkblue">State of the World</th>
		    <th style="color:darkblue">Evaluation Request</th>
		    <th style="color:darkred">Satisfaction of class, target, assignee</th>
                    <th style="color:darkred">Satisfaction state of <br><code>constraint:A1</code></th>
                    <th style="color:darkred"><br/>Activation state of the <br><code>permission</code></th>
		    <th style="color:darkred"><br/>Control state of the <br><code>permission</code> </code></th>
            	    <th style="color:darkred">Evaluation Report</th>
             </tr>
            <tr>
                    <td>EA1-1</td>
                    <td><a href="examples/Evaluation of Constraints/A1 Example of a constrained permission/policyA1.json">policy:A1</a></td>
                    <td><a href="examples/Evaluation of Constraints/A1 Example of a constrained permission/A11/stateA11.ttl">
			    <code>currentTime</code> is 2017-12-19T15:00:00</a></td>
		    <td><a href="examples/Evaluation of Constraints/A1 Example of a constrained permission/A11/evaluationrequestA11.json"<code>
			party:1 distributes document:1234</code></a></td>
		    <td>satisfied</td>
                    <td>satisfied</td>
                    <td>active</td>
		    <td>permit the action</td>
     		    <td><a href="examples/Evaluation of Constraints/A1 Example of a constrained permission/A11/compliancereport.A11.json">
		    report</a></td>
            </tr>
            <tr>
                    <td>EA1-2</td>
                    <td><a href="examples/Evaluation of Constraints/A1 Example of a constrained permission/policyA1.json">policy:A1</a></td>
                    <td><a href="examples/Evaluation of Constraints/A1 Example of a constrained permission/A12/stateA12.ttl">
			    <code>currentTime</code> is 2019-12-19T15:00:00</a></td>
		    <td><a href="examples/Evaluation of Constraints/A1 Example of a constrained permission/A11/evaluationrequestA12.json"<code>
			party:1 distributes document:1234</code></a></td>
		     <td>satisfied</td>
                    <td>not-satisfied</td>
                    <td>inactive</td>	
		    <td>deny the action</td>
             <td><a href="examples/Evaluation of Constraints/A1 Example of a constrained permission/A11/compliancereport.A12.json">
		    report</a></td>
            </tr>
        </table>  
        <p>Explanation:</p>
	  <ul>
            <li>(A1-1) (TO BE UPDATED) If the requested or perfomed action belongs to the class of actions regulated by the Permission 
            and the Permission is active then the action is permitted. </li>
            <li>(A1-2)  (TO BE UPDATED) If the requested or perfomed action belongs to the class of actions regulated by the Permission, 
	    but the Permission is inactive, then, assuming that only this Permission is considered 
            (this is because other permissions could regulate this action), the action is denied.</li>
            <li>  (TO BE UPDATED) If the requested or perfomed action does not belong to the class of actions regulated by the Permission 
	     then assuming that only this Permission is considered 
            (this is because other permissions could regulate this action), the action is denied.</li>
        </ul>   

	 <h3>Evaluation of Refinements</h3>
      
    <big><b>B1 Example of a permission whose permitted action is refined</b></big>
        <p>
            <b>Example description</b>
        </p>
        <p>
            The example below is similar to <a href="https://www.w3.org/TR/odrl-model/#constraint-action">Example 14</a> in the ODRL Information Model 2.2.
            It allows the target asset <code>document:1234</code> to be printed and also include a refinement indicating that the resolution 
            of the printing action must be less than or equal to 1200 dpi. 
	The permission is granted by the organization <code>party:616</code>.
        </p>
        <pre>
        {
             "@context": "http://www.w3.org/ns/odrl.jsonld",
             "@type": "Set",
             "uid": "http://example.com/policy/14",
             "permission": [{
                "target": "http://example.com/document/1234",
                "assigner": "http://example.com/party/616",
                "action": [{
                   "rdf:value": { "@id": "odrl:print" },
                   "refinement": [{
                      "@id": "http://example.com/refinement/14"
                      "leftOperand": "resolution",
                      "operator": "lteq",
                      "rightOperand": { "@value": "1200", "@type": "xsd:integer" },
                      "unit": "http://dbpedia.org/resource/Dots_per_inch"
                    }]
                }]
              }]
        }
        </pre>
        <p>
            <b>Expected behaviour of the Evaluator</b><br>

	The <b>class of actions</b> regulated by this Permission has <code>type</code> equal to <code>print</code> and 
            its <code>object</code> is equal to the target of the permission, i.e. <code>document:1234</code>.
		
        </p>  
	
	<!--
	Nicoletta: we keep only one table and we do not consider the refinement in the computation of the activation of the permision
	    like we do for obligations and prohibitions
	    
        <p><i>Access control scenario:</i></p> 
        <ul>
            <li>(E14-1) If the requested action belongs to the class of actions regulated by the Permission
          and it satisfies the refinement of the action (i.e. its <code>resolution</code> is less than or equal to 1200 dpi),
          then the Permission is active and the requested action can be performed.
            </li>
            <li>(E14-2) If the requested action belongs to the class of actions regulated by the Permission 
	but the refinement of the action is not satisfied 
	    (i.e. its <code>resolution</code> is more than 1200 dpi), then the Permission is inactive. 
            Assuming that only this Permission is considered then the action is blocked and it cannot be performed.</li>
        </ul>
        
        <table border="1" style="font-size:small;">
        <tr>
            <th>Example</th>
            <th style="color:darkblue">Policy</th>
            <th style="color:darkblue">Attempted Action</th>
            <th style="color:darkred">satisfaction of <br><code>refinement:14</code></th>
            <th style="color:darkred"><kbd>access control</kbd><br/>activation state of the <br><code>permission</code></th>
	    <th style="color:darkred"><kbd>access control</kbd><br/>control state of the <br><code>permission</code></code></th>
         </tr>
        <tr>
            <td>E14-1</td>
            <td>policy:14</td>
            <td><code>print</code> of <code>document:1234</code> with <code>resolution</code> less than 1200 dpi</td> 
            <td>satisfied</td>
            <td>active </td> 
	    <td>permit the attempted action</td>
        </tr>
        <tr>
            <td>E14-1</td>
            <td>policy:14</td>
            <td><code>print</code> of <code>document:1234</code> with <code>resolution</code> more than 1200 dpi</td> 
            <td>not-satisfied</td>
            <td>inactive </td>
		<td>deny the attempted action</td>
        </tr>
        </table>

	-->
        
        <p><i>Access control or monitoring scenario:</i></p> 
        <p>
            The Permission is always active because it has neither Constraints nor Conditions (Duties). 
	Given a formal description a performed action. 
	</p>
	<ul>
        <li>(E14-1) If the requested or performed action belongs to the class of actions regulated by the Permission and 
	the action satisfies the Refinement, then the permission permits the action.</li>
	<li>(E14-2) If the requested or performed actions belongs to the class of actions regulated by the Permission 
	but it does not satisfy the Refinement, then the permission does not permit the action.</li>
	</ul>
        

        <table border="1" style="font-size:small;">
        <tr>
                <th>Example</th>
                <th style="color:darkblue">Policy</th>
                <th style="color:darkblue">Requested/Performed Action</th>
                <th style="color:darkred">satisfaction of <br><code>refinement:14</code></th>
                <th style="color:darkred">activation state of the <br><code>permission</code></th>
		<th style="color:darkred">control state of the <br><code>permission</code></th>
         </tr>
        <tr>
                <td>E14-1</td>
                <td>policy:14</td>
                <td><code>print</code> of <code>document:1234</code> with <code>resolution</code> less than 1200 dpi was performed</td> 
                <td>satisfied</td>
                <td>active </td>
		 <td>permit the action</td>
        </tr>
        <tr>
                <td>E14-2</td>
                <td>policy:14</td>
                <td><code>print</code> of <code>document:1234</code> with <code>resolution</code> more than 1200 dpi was performed</td> 
                <td>not-satisfied</td>
                <td>active </td>
		<td>deny the action</td>
        </tr>
        </table>

        <h3>Evaluation of Conditions (Duties)</h3> 
       <p>
	 When a Permission contains Conditions (duties), they have to be evaluated first.     
       </p>
	    
	<p>
            A Condition (duty) is <b>fulfilled</b> if all its constraints are satisfied and
            if its action, with all refinements satisfied, has been performed. 
        </p>
        <ol> 
            <li>The initial state of a Condition (duty) is <b>inactive</b>.</li>
            <li>If at least one of the Constraints of the Condition (duty) is not satisfied, then the duty is <b>inactive</b>. 
            (For example, the duty to pay a ticket to get an active permission to enter in a museum may be active only on Sundays 
            and inactive the other days).</li>	
            <li>If the Constraints of the Condition (duty) are all satisfied or there are no Constraints, then the duty is <b>active</b>.
            <li> If the Condition (duty) is <b>active</b> and an action that belongs to the class of actions regulated by the 
		Condition with all refinements satisfied is performed, then Condition (duty) is <b>fulfilled</b>.</li>
        </ol>
        <p>The life cycle of a Condition (duty) is depicted in the figure below:
            <img src="2024ODRLDuty.png"></p>

	     <p>
            Once the Condition (duty) has been evaluated, the Permission can be evaluated. <br>
	    If the Condition is active but it is not fullfilled then the Permission is inactive.<br>
            If the Condition is fulfilled then the Permission is active.
        </p>

        <h4>Example of a conditioned permission</h4> 
        <p>
            <b>Example description</b>
        </p>
        
        <p>
            The example below (similar to <a href="https://www.w3.org/TR/odrl-model/#duty-perm">Example 22</a> in the ODRL Information Model 2.2)
	is a Permission that is constrained by a Condition (Duty).  The Condition does not have Constraints, but its action has a refinement. 
	This permission is granted by <code>party:sony</code> for <code>party:billie</code> to play the  
            target asset <code>music:1999</code>. The permission includes the Condition to perform the compensate action that has a refinement of <code>payAmount</code> 
            of euro 5.00. The semantics of Permission requires that the compensate action (included in the duty) must be performed 
            <b>before</b> the play action in order to get an <code>active</code> permission to perform the play action.
        </p>

        <pre>
        {
        "@context": "http://www.w3.org/ns/odrl.jsonld",
        "@type": "Agreement",
        "uid": "http://example.com/policy/22",
        "permission": [{
            "assigner": "http://example.com/party/sony",
            "assignee": "http://example.com/party/billie",
            "target": "http://example.com/music/1999.mp3",
            "action": "play",
            "duty": [{
               "@id" : "http://example.com/condition/1",
               "action": [{
                  "rdf:value": { "@id": "odrl:compensate" },
                  "refinement": [{
                     "@id" : "http://example.com/refinement/1",
                     "leftOperand": "payAmount",
                     "operator": "eq",
                     "rightOperand": { "@value": "5.00", "@type": "xsd:decimal" },
                     "unit": "http://dbpedia.org/resource/Euro"
                  }]
                }]
            }]
        }]
        }  
        </pre>

        <p>
            <b>Expected behaviour of the Evaluator</b>
        </p>
        <p>
	The <b>class of actions</b> regulated by this Permission has type equal to <code>play</code>,
	object equal to the <code>target</code> of the permission, i.e. <code>music:1999.mp3</code>,
        and <code>performer</code> equal to the assignee of the permission, i.e. <code>party:billie</code>.<br><br>
	
	The condition (duty) have to be evaluated first. <code>condition:1</code> does not have Constraints, 
	so it is never inactive. It starts to be <b>active</b> and it is <b>fulfilled</b> 
            when in the state of the world there is a representation of a performed action that matches with the 
            the class of actions described in the <code>condition:1</code>. <br><br>
      
	The <b>class of actions</b> regulated by <code>condition:1</code> has <code>type</code> equal to <code>compensate</code>, 
	its <code>payAmount</code> is equal to <code>5 euro</code>, and (given that the <code>odrl:compensatedParty</code> of 
            the <code>odrl:compensate</code> action is not specified) its <code>beneficiary</code> is the assigner of the permission 
            <code>party:sony</code>. It is not required that the agent who performs the compensate action is 
            <code>party:billie</code> because, for example, a company can pay for its employees 
            (feature for an ODRL profile: it would be useful for actions of compensation or payment to contain a 
	    reference to a policy or a rule and to the party for whom they are performed).
        </p>
       

        <p><i>Access control or monitorin scenario:</i></p> 
        <p>
           Given a formal description of the requested or performed action, if such an action belongs to the class of 
	actions regulated by the Permission and the Permission is active, then the action is permitted, otherwise it is 
	denied.
        </p>

        <table border="1" style="font-size:small;">
            <tr>
                <th>Example</th>
                <th style="color:darkblue">Policy</th>
                <th style="color:darkblue">World</th>
		  <th style="color:darkblue">Requested/Performed Action</th>
                <th style="color:darkred">activation state of <br><code>condition:1</code></th>
                <th style="color:darkred">deontic state of <br><code>condition:1</code></th>
                <th style="color:darkred">activation state of the <br><code>permission</code></th>
		<th style="color:darkred">control state of the <br><code>permission</code></th>   
            </tr>
            <tr>
                <td>E22-1</td>
                <td>policy:22</td>
                <td> <code>compensate</code> with <code>payAmount</code> = <code>5 euro</code> <br> and
			<code>beneficiary</code> = <code>party:sony</code> is not performed</td> 
		<td><code>play</code> and <code>target</code> = <code>music:1999.mp3</code> <br> 
		and <code>performer</code> = <code>party:billie</code></td>
                <td>active</td>
                <td>not-set</td>
                <td>inactive</td>
		<td>deny the action</td>    
            </tr>
        <tr>
                <td>E22-2</td>
                <td>policy:22</td>
                <td> <code>compensate</code> and <code>payAmount</code> = <code>5 euro</code> <br> and
			<code>beneficiary</code> = <code>party:sony</code> is performed</td> 
		<td><code>play</code> and <code>target</code> = <code>music:1999.mp3</code> <br>
		and  <code>performer</code> = <code>party:billie</code></td>
                <td>active</td>
                <td>fulfilled</td>
                <td>active</td>
		 <td>permit the action</td>    
        </tr>
       </table>    

<!--
       <p><i>Monitoring scenario:</i></p>
       Given a formal description a performed action. If such an action belongs to the class of actions regulated by the Permission and the Permission is active
       then the permission is used by the performed action.

        <table border="1" style="font-size:small;">
            <tr>
                <th>Example</th>
                <th style="color:darkblue">Policy</th>
                <th style="color:darkblue">World</th>
                <th style="color:darkred">activation of <br><code>condition:1</code></th>
                <th style="color:darkred">deontic state of <br><code>condition:1</code></th>
                <th style="color:darkred"><kbd>monitoring</kbd><br>activation <br><code>permission</code></th>
		<th style="color:darkred"><kbd>monitoring</kbd><br/>control state</code></th>   
            </tr>
            <tr>
                <td>E22-3</td>
                <td>policy:22</td>
                <td><code>compensate</code> with <code>payAmount</code> = <code>5 euro</code> <br>
		and <code>beneficiary</code> = <code>party:sony</code> is not performed.<br>
		<code>play</code> with <code>target</code> = <code>music:1999.mp3</code> <br>
		and <code>performer</code> = <code>party:billie</code> is performed.</td> 
                <td>active</td>
                <td>not-set</td>
                <td>inactive</td>
		<td>deny the performed action</td>    
            </tr>
            <tr>
                <td>E22-4</td>
                <td>policy:22</td>
                <td><code>compensate</code> with <code>payAmount</code> = <code>5 euro</code> <br>
		and <code>beneficiary</code> = <code>party:sony</code> is performed.<br>
		<code>play</code> with <code>target</code> = <code>music:1999.mp3</code> <br>
		and <code>performer</code> = <code>party:billie</code> is performed.</td> 
                <td>active</td>
                <td>fulfilled</td>
                <td>active</td>
		<td>permit the performed action</td>    
            </tr>
        </table> 

-->

        <h4>Example of a permission whose condition has constraints</h4>
            <p>
                <b>Example description</b>
            </p>
        <p>
            This policy contains a Permission constrained by a Condition (duty) (like in policy:22) 
	    with the difference that such Condition has constraints, it is only activated on Sundays.
        </p>

        <pre>
        {
        "@context": "http://www.w3.org/ns/odrl.jsonld",
        "@type": "Agreement",
        "uid": "http://example.com/policy/88",
        "permission": [{
            "assigner": "http://example.com/party/sony",
            "assignee": "http://example.com/party/billie",
            "target": "http://example.com/music/1999.mp3",
            "action": "play",
            "duty": [{
                "@id" : "http://example.com/condition/1",
                "action": [{
                    "@id" : "http://example.com/action/payment",
                    "rdf:value": { "@id": "odrl:compensate" },
                    "refinement": [{
                        "@id" : "http://example.com/refinement/1",
                        "leftOperand": "payAmount",
                        "operator": "eq",
                        "rightOperand": { "@value": "5.00", "@type": "xsd:decimal" },
                        "unit": "http://dbpedia.org/resource/Euro"
                    }]
                }],
                "constraint": [{
                    "@id" : "http://example.com/constraint/1",
                    "leftOperand": "ex:dayOfWeek",
                    "operator": "eq",
                    "rightOperand": { "@value": "Sunday", "@type": "xsd:string" }
                }]
            }]
        }]
        }  
        </pre>
        <p>
            <b>Expected behaviour of the Evaluator</b>
        </p>

<p>The <b>class of actions</b> regulated by this Permission has type equal to <code>play</code>,
object equal to the <code>target</code> of the permission, i.e. <code>music:1999.mp3</code>,
and <code>performer</code> equal to the assignee of the permission, i.e. <code>party:billie</code>.<br><br>
</p>
	    
<p>The <b>class of actions</b> regulated by <code>condition:1</code> has <code>type</code> equal to <code>compensate</code>, 
its <code>payAmount</code> is equal to <code>5 euro</code>, and (given that the <code>odrl:compensatedParty</code> of 
the <code>odrl:compensate</code> action is not specified) its <code>beneficiary</code> is the assigner of the permission 
<code>party:sony</code>.  </p>
	    
        <p>
        <code>condition:1</code> has to be evaluated first. Given that <code>condition:1</code> has constraints 
	it starts to be <b>inactive</b> and it becomes <b>active</b> when its Constraints are all satisfied 
        (the state of the world satisfies its Constraints, i.e. the current date is a Sunday. For expressing this constraint
	an external vocabulary with the leftOperand <code>ex:dayOfWeek</code> is used). 
	An active Constraint, it is also <b>fulfilled</b> when in the state of the world there is a representation 
	of an performed action that matches with the class of actions described in the Constraint.
        </p>
        <p>
        The permission can be evaluated as follows: <br>
	If the Condition is inactive (its Constraint is not satisfied), the Permission is active. <br>
        If the Condition is active but it is not fullfilled, the Permission is inactive. <br>
        If the Condition is fulfilled the Permission is active.
        </p>
<p><i>Access control or monitoring scenario:</i></p> 
   
        <table border="1" style="font-size:small;">
            <tr>
                <th>Example</th>
                <th style="color:darkblue">Policy</th>
                <th style="color:darkblue">World</th>
		<th style="color:darkblue">Requested/Performed Action</th>
                <th style="color:darkred">satisfaction of <br><code>constraint:1</code></th>
                <th style="color:darkred">satisfaction of <br><code>refinement:1</code></th>
                <th style="color:darkred">activation of <br><code>condition:1</code></th>
                <th style="color:darkred">deontic state of <br><code>condition:1</code></th>
                <th style="color:darkred"><br>activation of the <br><code>permission</code></th>
		<th style="color:darkred"><br>control state of the <br><code>permission</code></th>
            </tr>
            <tr>
                <td>E88-1</td>
                <td>policy:88</td>
                <td>It is not Sunday<br></td> 
		<td><code>play</code> and <code>target</code> = <code>music:1999.mp3</code> <br> 
		and <code>performer</code> = <code>party:billie</code></td>
                <td>not-satisfied</td>
                <td>don't care</td>
                <td>inactive</td>
                <td>not-set</td>
                <td>active</td>
		<td>permit the action</td>
            </tr>
            <tr>
                <td>E88-2</td>
                <td>policy:88</td>
                <td>It is Sunday<br>
		<code>compensate</code> with <code>payAmount</code> = <code>5 euro</code> <br>
		and <code>beneficiary</code> = <code>party:sony</code> is NOT performed.<br>
			</td> 
		<td><code>play</code> and <code>target</code> = <code>music:1999.mp3</code> <br> 
		and <code>performer</code> = <code>party:billie</code></td>
                <td>satisfied</td>
                <td>not-satisfied</td>
                <td>active</td>
                <td>not-set</td>
                <td>inactive</td>
		<td>deny the action</td>
            </tr>
            <tr>
                <td>E88-3</td>
                <td>policy:88</td>
                <td>It is Sunday<br>
		<code>compensate</code> with <code>payAmount</code> = <code>5 euro</code> <br>
		and <code>beneficiary</code> = <code>party:sony</code> is performed.<br>
		</td> 
		    <td><code>play</code> and <code>target</code> = <code>music:1999.mp3</code> <br> 
		and <code>performer</code> = <code>party:billie</code></td>
                <td>satisfied</td>
                <td>satisfied</td>
                <td>active</td>
                <td>fulfilled</td>
                <td>active</td>
		<td>permit the action</td>
            </tr>
        </table>            
</section>

<section id="sectionProhibitions">		
<h2>Semantics of Prohibitions</h2> 		

In ODRL 2.2., a Rule that belongs to the <b>odrl:Prohibition</b> class is <b>active</b> (its action, with all refinements satisfied
cannot be exercised) if all Constraints of the Rule are satisfied, otherwise it is <b>inactive</b>.<br> 

In order to evaluate if a prohibition is active, it is necessary to evaluate the satisfaction of its Constraints on the state of the world.<br>

An ODRL Evaluator will determine that a violation has been produced if the action regulated by an active prohibition is performed. 
If multiple actions are related to a single prohibition, the execution of a single action will result in a violation. 
The ODRL Evaluator will calculate the <b>deontic state</b> of an <b>active</b> prohibition to be within one of these possibilities:
    <ul>
    <li> <b>not-set</b> when the regulated action with all refinements satisfied has not been performed; </li>
    <li> <b>violated</b> when the regulated action with all refinements satisfied has been performed; </li>
    </ul>
A prohibition may include an <a href="https://www.w3.org/TR/odrl-model/#duty-prohib"><code>odrl:remedy</code></a> for its violation. <br><br>

        <h4>Evaluation of a prohibition with constraints</h4>
        <p>
            <b>Example description</b>
        </p>
        <p> 
            This is example is similar to <a href="https://www.w3.org/TR/odrl-model/#prohibition">Example 19</a> in the Information 
            Model, with the differences that it has not a related permission and it has a Constraint. In this case, there is a prohibition that is constrained by a constraint.
            The policy below is a formal Agreement between two parties (the assigner and the assignee) that the action of archiving the specified digital asset is prohibited.
            The prohibition is specifically active before the first day of 2025.
        </p>	
        <pre>
        {
        "@context": "http://www.w3.org/ns/odrl.jsonld",
        "@type": "Agreement",
        "uid": "http://example.com/policy/55",
        "prohibition": [{
            "@id" : "http://example.com/prohibition/1",
            "target": "http://example.com/photoAlbum:55",
            "action": "archive",
            "assigner": "http://example.com/MyPix:55",
            "assignee": "http://example.com/assignee:55",
            "constraint": [{
               "@id" : "http://example.com/constraint/1",
               "leftOperand": "dateTime",
               "operator": "lt",
                "rightOperand":  { "@value": "2025-01-01", "@type": "xsd:date" }
           }]
        }]
        }
        </pre>
        <p>
            <b>Expected behaviour of the Evaluator</b>
        </p>
        <p>
            The prohibition has an activation state and a deontic state that have to be calculated. 
        </p>
        <p>
            In this example, the Constraint must be evaluated on the state of the world. 
	As long as the current time is before the first day of 2025 the Prohibition is active. 
	After that date the Prohibition is inactive. 
	When the prohibition is active, a violation occurs if the prohibited action is performed.
        </p>
        <table border="1" style="font-size:small;">
            <tr>
                <th>Example</th>
                <th style="color:darkblue">Policy</th>
                <th style="color:darkblue">World</th>
                <th style="color:darkred">satisfaction of <br><code>constraint:1</code></th>                
                <th style="color:darkred">activation of the <br><code>prohibition:1</code></th>
                <th style="color:darkred">deontic state of the <br><code>prohibition:1</code></th>
            </tr>
            <tr>
                <td>E55-1</td>
                <td>policy:55</td>
                <td><code>archive</code> of <code>photoAlbum:55</code> <br> 
		by <code>assignee:55</code> is performed before 2025-01-01</td>                 
                <td>satisfied</td>
                <td>active</td>
                <td>violated by the action</td>
            </tr>
            <tr>
                <td>E55-2</td>
                <td>policy:55</td>
               <td><code>archive</code> of <code>photoAlbum:55</code> <br> 
		by <code>assignee:55</code> is NOT performed before 2025-01-01</td>                        
                <td>satisfied</td>
                <td>active</td>
                <td>not-set</td>
            </tr>
            <tr>
                <td>E19-3</td>
                <td>policy:55</td>                
               <td><code>archive</code> of <code>photoAlbum:55</code> <br> 
		by <code>assignee:55</code> is performed after 2025-01-01</td>        
                <td>not-satisfied</td>
                <td>inactive</td>
                <td>not-set</td>
            </tr>
        </table>             
</section>


<section id="sectionObligations">	
<h2>Sematics of Obligations</h2> 	

    In ODRL 2.2., an Obligation that belongs to the <code>odrl:Duty</code> class (it would be better to have an <code>odrl:Obligation</code> class) is <b>active</b> (its action,  
    with all refinements satisfied, should be perfomed) if all constraints of the Rule are satisfied, otherwise it is <b>inactive</b>.<br> 
    An active Obligation becomes:
    <ul>
    <li> <b>fulfilled</b> when the regulated action with all refinements satisfied is performed; </li>
    <li> <b>violated</b> when the regulated action with all refinements satisfied can no longer be performed; </li>
    <li> <b>not-set</b> when the regulated action with all refinements satisfied can be performed but has not been so far. </li>
    </ul>
    An obligation may include an <code>odrl:consequence</code> of not fulfilling that obligation. <br><br>

    <!--<b>Problem</b>: reasoning about deadline.-->

    <h4>Evaluation of an obligation without constraints</h4>
        <p>
            <b>Example description</b>
        </p>    
        <p>
            This example of derived from <a href="https://www.w3.org/TR/odrl-model/#duty-policy">Example 20</a> in the Information Model. 
            It describes an obligation that is not constrained by a Constraint. The policy below is a formal Agreement between two parties (the assigner and the assignee) that the action to compensate 
            the assigner for a payment amount of EU500.00 is obliged.
        </p>	

        <pre>
        {
        "@context": "http://www.w3.org/ns/odrl.jsonld",
        "@type": "Agreement",
        "uid": "http://example.com/policy/42",
        "obligation": [{
          "@id" : "http://example.com/obligation/1",
          "assigner": "http://example.com/party/43",
          "assignee": "http://example.com/party/44",
          "action": [{
              "rdf:value": {
                "@id": "odrl:compensate"
              },
              "refinement": [
                {
                  "leftOperand": "payAmount",
                  "operator": "eq",
                  "rightOperand": { "@value": "500.00", "@type": "xsd:decimal" },
                  "unit": "http://dbpedia.org/resource/Euro"
                }]
            }]
        }]
        }
        </pre>
        <p>
            <b>Expected behaviour of the Evaluator</b>
        </p>
        <p>
            The Evaluator must determine the activation state and the deontic state of the obligation.
            The Obligation is always active. If the obliged action is performed then the obligation is fulfilled.
        </p>
        <table border="1" style="font-size:small;">
            <tr>
                <th>Example</th>
                <th style="color:darkblue">Policy</th>
                <th style="color:darkblue">World</th>
                <th style="color:darkred">activation of <br><code>obligation:1</code></th>
                <th style="color:darkred">deontic state of <br><code>obligation:1</code></th>
            </tr>
            <tr>
                <td>E42-1</td>
                <td>policy:42</td>
                <td><code>compensate</code> of <code>500 euro</code> by <br>
		<code>party:44</code> to <code>party:43</code> is performed</td>                 
                <td>active</td>
                <td>fulfilled by the performed action</td>
            </tr>
            <tr>
                <td>E42-2</td>
                <td>policy:42</td>
                 <td><code>compensate</code> of <code>500 euro</code> by <br>
		<code>party:44</code> to <code>party:43</code> is NOT performed</td>                 
                <td>active</td>
                <td>not-set</td>
            </tr>
        </table>         
    <!--<h4>Evaluation of an obligation with constraints</h4>-->

</section>	


<section id="references">
<h2>References</h2>
<small>

[Wieringa93] Wieringa, R. J., & Meyer, J. J. C. (1993). Applications of deontic logic in computer science: A concise overview. Deontic logic in computer science, pp. 17-40 John Wiley & Sons.<br/>

[Gunter01] Gunter, C. A., Weeks, S. T., & Wright, A. K. (2001, January). Models and languages for digital rights. In System Sciences, 2001. Proceedings of the 34th Annual Hawaii International Conference on (pp. 5-pp). IEEE.<br/>

[ODRL02] Ianella, R. Open Digital Rights Language (ODRL) Version 1.1. 
Formerly available <a href="http://odrl.net/1.1/ODRL-11.pdf">online</a>.<br/>

[Pucella02] Pucella, R., &Weissman, V. (2002). A logic for reasoning about digital rights. In Computer Security Foundations Workshop, 2002. Proceedings. 15th IEEE (pp. 282-294). IEEE.<br/>

[XACML03] Anderson, A., Nadalin, A., Parducci, B., Engovatov, D., Lockhart, H., Kudo, M., ... & Moses, T. (2003). extensible access control markup language (xacml) version 1.0. OASIS.<br/>

[Delgado03] Delgado, J., Gallego, I., Llorente, S., & Garca, R. (2003, December). IPROnto: An ontology for digital rights management. In 16th Annual Conference on Legal Knowledge and Information Systems, JURIX (Vol. 106).<br/>

[Guth03] Guth, S., Neumann, G., &Strembeck, M. (2003, October). Experiences with the enforcement of access rights extracted from ODRL-based digital contracts. In Proceedings of the 3rd ACM workshop on Digital rights management (pp. 90-102). ACM.<br/>

[Pucella04] RiccardoPucella , Vicky Weissman. A formal foundation for ODRL, In Proc. of the Workshop on Issues in the Theory of Security (WIST04)<br/>

[Wang04] Wang, X. (2004). MPEG-21 rights expression language: Enabling interoperable digital rights management. IEEE MultiMedia, 11(4), 84-87.<br/>

[Garca05] Garca, R., Gil, R., Gallego, I., & Delgado, J. (2005, July). Formalising ODRL semantics using web ontologies. In Proc. 2nd Intl. ODRL Workshop (pp. 1-10).<br/>

[Barth06] Adam Barth and John C. Mitchell. Managing digital rights using linear logic. In LICS 06: Proceedings of the 21st Annual IEEE Symposium on Logic in Computer Science, pages 127136,Washington, DC, USA, 2006. IEEE Computer Society<br/>

[Chong06] Chong, C. N., Corin, R., Doumen, J., Etalle, S., Hartel, P., Law, Y. W., &Tokmakoff, A. (2006). LicenseScript: a logical language for digital rights management. Annals of Telecommunications, 61(3), 284-331.<br/>

[Nadah07] Nadia Nadah, Melanie Dulong de Rosnay, Bruno Bachimont. Licensing Digital Content With
A Generic Ontology: Escaping From The Rights Expression Language Jungle. ACM. ICAIL2007 - 11th international conference on Articial intelligence and law, Jun 2007, Stanford, United States. pp.65-69, 2007, Proceedings of the 11th international conference on Articial intelligence and law<br/>

[Gangadharan07] Gangadharan G.R., Weiss M., DAndrea V., Iannella R. (2007) Service License Composition and Compatibility Analysis. In: Krmer B.J., Lin KJ., Narasimhan P. (eds) Service-Oriented Computing  ICSOC 2007. ICSOC 2007. Lecture Notes in Computer Science, vol 4749. Springer, Berlin, Heidelberg<br/>

[Jamkhedkar08] Pramod Arvind Jamkhedkar, Gregory L. Heileman. Conceptual Model For Rights. Proceedings of the 8th ACM workshop on Digital rights management Pages 29-38, 2008<br/>

[Sheppard09] Sheppard, N. P., &Safavi-Naini, R. (2009, November). On the operational semantics of rights expression languages. In Proceedings of the nineth ACM workshop on Digital rights management (pp. 17-28). ACM. (<a href="https://dl.acm.org/doi/10.1145/1655048.1655052">link</a>)<br/>

[Kasten10] Andreas Kasten and Rdiger Grimm. Making the Semantics of ODRL and URM Explicit Using Web Ontologies. Virtual Goods, pages 7791, 2010.<br/>

[Villata12] Serena Villata and FabienGandon. Licenses compatibilityand composition in the web of data. In The 2ndInternational Workshop on Consuming Linked Data.2012.<br/>

[Rodriguez13] Rodrguez-Doncel, V., Surez-Figueroa, M. C., Gmez-Prez, A., & Poveda-Villaln, M. (2013, October). License linked data resources pattern. In Proceedings of the 4th International Conference on Ontology and Semantic Web Patterns-Volume 1188 (pp. 84-87). CEUR-WS. org.<br/>

[Rotolo13] Antonino Rotolo, Serena Villata, and Fabien Gandon. A deontic logic semantics
for licenses composition in the web of data. In Intl Conf. on Artificial Intelligence
and Law ICAIL, pages 111120, 2013.<br/>

[Steyskal14] Simon Steyskal and Axel Polleres. Defining expressive access policies for linked data using the ODRL ontology 2.0. In Proceedings of the 10th International Conference on Semantic Systems, SEMANTICS 2014, Leipzig, Germany, September 4-5, 2014, pages 2023, 2014<br/>

[Cabrio14] Elena Cabrio, Alessio Palmero Aprosio, and Serena Villata. These are your rights - A natural language processing approach to automated RDF licenses generation. In The Semantic Web: Trends and Challenges - 11th International Conference, ESWC 2014, Anissaras, Crete, Greece, May 25-29, 2014. Proceedings, pages 255 269, 2014<br/>

[Ianella15b] R. Iannella, M. Steidl, S. Guth (eds). Open Digital Rights Language (ODRL) Version 2.1  Common Vocabulary. Final Specification, W3C ODRL Community Group
http://www.w3.org/community/odrl/vocab/2.1/<br/>

[Ianella15] R. Iannella& S. Guth& D. Paehler& A. Kasten (eds). Open Digital Rights Language (ODRL) Version 2.1  Core Model. Final Specification, W3C ODRL Community Group. http://www.w3.org/community/odrl/model/2.1/<br/>

[McRoberts15] M. McRoberts, V. Rodrguez Doncel. Open Digital Rights Language (ODRL) Version 2.1  Ontology. Final Specification, W3C ODRL Community Group
http://www.w3.org/ns/odrl/2/<br/>

[Rodriguez15] Rodrguez, E., Delgado, J., Boch, L., & Rodrguez-Doncel, V. (2015). Media Contract Formalization Using a Standardized Contract Expression Language. IEEE multimedia, 22(2), 64-74.<br/>

[Steyskal15] Steyskal, S., &Kirrane, S. (2015). If you can't enforce it, contract it: Enforceability in Policy-Driven (Linked) Data Markets. In SEMANTiCS (Posters & Demos) (pp. 63-66).<br/>

[Steyskal15b] Steyskal, S., &Polleres, A. (2015, August). Towards formal semantics for ODRL policies. In International Symposium on Rules and Rule Markup Languages for the Semantic Web (pp. 360-375). Springer International Publishing.<br/>

[Rodriguez16] Rodrguez-Doncel, V., Delgado, J., Llorente, S., Rodrguez, E., & Boch, L. (2016). Overview of the MPEG-21 Media Contract Ontology. Semantic Web, 7(3), 311-332.<br/>

[DeVos19] De Vos, M., Kirrane, S., Padget, J., & Satoh, K. (2019, September). ODRL policy modelling and compliance checking. In International Joint Conference on Rules and Reasoning (pp. 36-51). Springer, Cham.<br/>

[Kebede20] Kebede, M. G., Sileno, G., & van Engers, T. (2020). A critical reflection on ODRL. Springer Lecture Notes Artificial Intelligence, AICOL2021, to appear.<br/>

[Kim20] Kim, J. M., & Chung, H. S. (2020). ODRL Ontology Extention Model and Prototype Design for the Specification of the Rights to use Digital Contents. Journal of Convergence for Information Technology, 10(1), 13-21.<br/>

[Esteves21] Esteves, B., Pandit, H. J., & Rodrguez-Doncel, V. ODRL Profile for Expressing Consent through Granular Access Control Policies in Solid. To appear, proc. of the Workshop on Consent Management in Online Services, Networks and Things (COnSeNT) - co-located with IEEE European Symposium on Security and Privacy (EuroS&P 2021)<br/>

[Fornara19] N. Fornara and M. Colombetti. Using Semantic Web Technologies and Production Rules for Reasoning on Obligations, Permissions, and Prohibitions. AI Communications, vol. 32, no. 4, pp. 319-334, 2019. 

[Holzer07] Holzer, M., Katzenbeisser, S., Schallhart, C.: Towards a formal semantics for ODRL. Proceedings of the 1st International workshop on ODRL, pp. 137-148,
(<a href="https://link.springer.com/chapter/10.1007/978-3-319-21542-6_23">link</a>) (2004)

This specification owes much to the previous description in the <a href="https://www.w3.org/2016/poe/wiki/Evaluator">wiki</a>.</p>

</small>

</section>   				

                    <!---		<section id="section2"> 
            <h2>Scenarios</h2>

            <h3>Policy Monitoring</h3>
                    <p>Various autonomous agents interact in an open interaction system and perform various types of actions. 
                    These actions, with their type (e.g. a payment), various parameters (who paid, how much they paid, etc.) 
                    and the time instant at which they are done, are digitally represented in a <b>'world state'</b> or 'system state'.<br>
                    (What model of data (ontology) is used for representing the state of the world?)</p> 

                    <p>A set of ODRL policies (P) regulate the behaviour of those agents, every policy contains some rules (R) that are prohibitions, duties, or permissions.</p>

                    <p><b>Policy monitoring</b> (or compliance checking) is a continuous process that consists of computing at every instant of time:</p>
                    <ul>
                            <li>the set of permissions that are valid (i.e. check if all constraints are satisfied and if all duties are fulfilled);</li>
                            <li>the set of obligations or prohibitions that are active (i.e. checking if all constraints are satisfied);</li>
                            <li>the set of active obligations or prohibitions that are fulfilled or violated by the performance of certain actions 
                                    (i.e. check if the performance of an action matches the action regulated by an <b>active</b> obligation or a <b>active</b> 
                                    prohibition taking into account all the refinements used for describing the action in the policy;</li>
                    </ul>	

                    <p>Monitoring or compliance checking are useful, for example, for being able to:</p>
                    <ul>
                            <li>Check if I am compliant with the policies in which I am involved as a debtor. For example, a company needs to check if 
                            the behaviour of its employees is compliant with the policies attached to the digital assets used inside the company.</li>
                            <li>Check if the policies in which I am involved as a creditor are violated. For example, I can attach to a picture 
                            the prohibition to sell it and I would like to automatically monitor if the actions performed on that picture are 
                            compliant with such a prohibition.</li>
                    </ul>

                    <p>Simulation may be used by consumers for a what-if analysis and evaluate if the performance of an action on a digital asset will 
                    I violate one of its policies.<br>
                    In this scenario, it is assumed that agents are free to perform all actions, even prohibited ones. 
                    A permission is interesting when it is an exception to a prohibition.</p>

            <h3>Access Control</h3>

            <p><b>Goal:</b> Match access requests with ODRL policies determining access control to stored digital resources</p>

            <p>Access control policies can be used to determine access by users or software agents to digital resources.</p>
            <p>This is particularly important in decentralised systems where the users are the entities responsible to grant or deny 
                    access to the data and are responsible to define or adhere to a set of policies that satisfy their preferences.</p>
            <p>By using these policies in an algorithm to match incoming access requests for data, a system can provide a 
                    fine-grained access control mechanism to its users.</p>				
            <p>In this scenario, if an agent does not have permission to access certain data, it will not access the data, 
                    the prohibition is regimented and cannot be violated.</p>
            <p>Typically in this scenario, the entities responsible to grant or deny access to the data would write <code>odrl:Offer</code> policies 
                    (or new types of policies can be created, e.g., preference, requirement). The agent trying to access the data 
                    would write <code>odrl:Request</code> policies and the final agreement between the parties can be stored as an <i>odrl:Agreement</i> 
                    (associated with the <code>odrl:Offer</code> and <code>odrl:Request</code> policies).</p>

            <h3>License composition</h3>
                    <p>Two resources differently licensed ("policed") need to be integrated in a new work.
                    Which range of policies will be compatible with these two previous policies?
                    Are these two policies compatible at all?
                    The works of Governatori, Villata et al., DALICC and many others addressed this problem, but their results and ideas were never incorporated into ODRL.</p>

            <h3>Validation</h3>
                    <p>ODRL is being used in a Language Resource Data Portal. Anybody can freely upload a resource, and anybody can post ODRL policies 
                    associated to them. The ids of the content resources and the assigners are verified, but the rest is left to the users.
                    However, if they upload broken or malicious policies, they could break the system (e.g. a policy with 1 million rules).
                    How to validate the ODRL policies so that they are conformant with a limited subset of them?
                            <a href="http://odrlapi.appspot.com/">ODRL Validator and Evaluator Sandbox</a></p>

            <h3>Planning</h3>
                    <p>I want to do an action, I don't have permission to do it, what do I have to do to get permission to do it?
                    Which is the sequence of messages to be exchanged within a protocol?</p>

            </section>

-->			


    </body>
</html>
